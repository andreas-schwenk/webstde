"use strict";var webSTDE=(()=>{var S=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var k=Object.prototype.hasOwnProperty;var w=(e,t)=>{for(var i in t)S(e,i,{get:t[i],enumerable:!0})},E=(e,t,i,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of x(t))!k.call(e,s)&&s!==i&&S(e,s,{get:()=>t[s],enumerable:!(n=I(t,s))||n.enumerable});return e};var B=e=>E(S({},"__esModule",{value:!0}),e);var T={};w(T,{GuiState:()=>b,guiState:()=>r,init:()=>O,machine:()=>l,mouseX:()=>a,mouseY:()=>c});function v(e,t){switch(t.clearRect(0,0,e.width,e.height),l.draw(t),r){case"INSERT_STATE":t.strokeStyle="gray",g(t,!0,a,c,220,100);break}}function g(e,t,i,n,s,o,d=""){t?(e.strokeStyle="blue",e.lineWidth=4):(e.strokeStyle="black",e.lineWidth=2),e.beginPath(),e.ellipse(i,n,s/2,o/2,0,0,2*Math.PI),e.stroke(),e.moveTo(i-s/2,n),e.lineTo(i+s/2,n),e.stroke(),e.font="24px Arial",e.textAlign="center",e.fillText(d,i,n-o/6)}var h=class{constructor(){this.id="";this.states=[];this.transitions=[]}addState(t){this.states.push(t),this.recalculateStateIndices()}draw(t){for(let i of this.states)i.draw(t)}select(t,i){for(let n of this.states)n.select(t,i)}recalculateStateIndices(){let t=this.states.length;for(let i=0;i<t;i++)this.states[i].setIdx(i)}};var m=class{constructor(t,i,n,s=""){this.selected=!1;this.x=0;this.y=0;this.width=220;this.height=110;this.id="";this.idx=0;this.desc="";this.x=t,this.y=i,this.id=n,this.desc=s}getIdx(){return this.idx}setIdx(t){this.idx=t}draw(t){g(t,this.selected,this.x,this.y,this.width,this.height,this.id)}select(t,i){this.selected=t>=this.x-this.width/2&&t<=this.x+this.width/2&&i>=this.y-this.height/2&&i<=this.y+this.height/2}toJSON(){return{id:this.id,x:this.x,y:this.y,desc:this.desc,q:this.mooreOutput}}};var b=(i=>(i.Select="SELECT",i.InsertMachineState="INSERT_STATE",i))(b||{}),r="SELECT",a=0,c=0,l=new h;function O(){let e=document.getElementById("help");e.onclick=function(){let u="help.html";window.open(u,"_blank").focus()};let t=document.getElementById("select");t.checked=!0,t.onclick=function(){r="SELECT"};let i=document.getElementById("insertStartState");i.onclick=function(){console.log("clicked insert start state!")};let n=document.getElementById("insertState");n.onclick=function(){r="INSERT_STATE"};let s=document.getElementById("insertTransition");s.onclick=function(){console.log("clicked insert transition!")};let o=document.getElementById("canvas"),d=o.getContext("2d");o.addEventListener("mousemove",u=>{let p=o.getBoundingClientRect(),f=window.devicePixelRatio||1;a=(u.clientX-p.left)*f,c=(u.clientY-p.top)*f,v(o,d)}),o.addEventListener("mouseup",u=>{switch(r){case"SELECT":l.select(a,c);break;case"INSERT_STATE":r="SELECT",t.checked=!0;let p=new m(a,c,"","");l.addState(p);break}v(o,d)})}return B(T);})();
